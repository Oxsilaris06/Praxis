<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Strategica | Llama 3.2 Mobile Perfect (WASM)</title>
    <link rel="icon" href="https://oxsilaris06.github.io/Praxis/maskable_icon(2).png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Saira+Stencil+One&family=Roboto+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    
    <style>
        /* --- Styles CSS : Base professionnelle et contraste mobile --- */
        :root {
            /* Light Mode (Clair, Pro) */
            --bg-body: #f4f7f9;
            --bg-container: #ffffff;
            --bg-interactive: #eef2f5;
            --text-primary: #1a1a1a;
            --text-secondary: #6e7a85;
            --border-color: #d1d9e0;
            --accent-blue: #007bff;
            --llama-color: #007bff;
            --danger-red: #dc3545;
            --typing-indicator: #28a745;
        }
        body.dark-mode {
            /* Dark Mode (Sombre, Haut Contraste) */
            --bg-body: #0b0b0b;
            --bg-container: #1c1c1c;
            --bg-interactive: #2a2a2a;
            --text-primary: #f0f0f0; /* Blanc pour le contraste */
            --text-secondary: #a0a0a0;
            --border-color: #444444;
            --accent-blue: #5b9bd5;
            --llama-color: #5b9bd5; 
            --danger-red: #ff7f7f;
            --typing-indicator: #48a666;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { font-size: 16px; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-body); 
            color: var(--text-primary); 
            line-height: 1.6; 
            padding: 10px; 
            padding-bottom: 90px;
        }
        .container { 
            width: 100%; 
            max-width: 1000px; 
            margin: auto; 
            background: var(--bg-container); 
            padding: 25px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); 
        }
        h1 { font-size: 2.5em; margin-bottom: 5px; color: var(--llama-color); font-family: 'Saira Stencil One', sans-serif; text-align: center; }
        h2 { font-size: 1.8em; color: var(--llama-color); border-bottom: 2px solid var(--llama-color); padding-bottom: 8px; margin-top: 25px; font-weight: 700; }
        p.subtitle { text-align: center; color: var(--text-secondary); margin-bottom: 25px; }
        .section { border: 1px solid var(--border-color); border-radius: 10px; padding: 20px; margin-top: 20px; background-color: var(--bg-interactive); }
        
        /* Model Loading Styles */
        #model-loader button { 
            background-color: var(--llama-color); color: white; padding: 12px 18px; border: none; border-radius: 6px; cursor: pointer; 
            font-family: 'Inter', sans-serif; font-size: 1.0em; font-weight: 600; transition: background-color 0.2s; 
        }
        #model-loader button:hover:not(:disabled) { background-color: #0056b3; }
        .progress-bar { background-color: var(--llama-color); }
        .console-output { height: 120px; font-family: 'Roboto Mono', monospace; overflow-y: auto; }

        /* --- Chat Interface Core (Mobile First) --- */
        #chat-interface { max-width: 850px; margin: 0 auto; }
        
        /* Display Area */
        #messages-display { 
            height: 65vh; /* Plus grand pour le mobile */
            min-height: 350px;
            overflow-y: scroll; padding: 15px; 
            border: 1px solid var(--border-color); margin-bottom: 15px; 
            background-color: var(--bg-container); border-radius: 8px;
            display: flex; flex-direction: column; 
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            scroll-behavior: smooth; /* Défilement doux */
        }

        /* Message Bubbles */
        .message-wrapper { display: flex; margin: 8px 0; width: 100%; }
        .user-message-wrapper { justify-content: flex-end; }
        .assistant-message-wrapper { justify-content: flex-start; }

        .message-bubble { 
            max-width: 85%; padding: 12px 15px; border-radius: 18px; 
            line-height: 1.5; font-size: 1.0em; font-family: 'Inter', sans-serif;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .user-message-bubble { 
            background-color: var(--llama-color); color: white; 
            border-bottom-right-radius: 4px;
        }
        .assistant-message-bubble { 
            background-color: var(--bg-interactive); color: var(--text-primary); 
            border: 1px solid var(--border-color);
            border-bottom-left-radius: 4px;
        }
        .message-bubble strong { display: block; margin-bottom: 5px; font-size: 0.85em; font-weight: 600; color: var(--text-secondary); }
        .user-message-bubble strong { color: rgba(255, 255, 255, 0.8); }
        
        /* Code Blocks */
        .message-bubble pre {
            background-color: var(--bg-container);
            border: 1px solid var(--border-color);
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
            margin-top: 10px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
        }
        
        /* Typing Indicator (Optimisé pour la simulation rapide) */
        .typing-indicator {
            display: flex; align-items: center; min-height: 1.5em; 
            white-space: pre-wrap;
        }
        .typing-cursor {
            width: 2px;
            height: 1.2em;
            margin-left: 2px;
            background-color: var(--text-primary);
            animation: blink 1s infinite;
        }

        /* Input Area (Optimisation mobile : zone de texte et bouton fixes) */
        .input-group { display: flex; align-items: flex-end; }
        #userInput {
            flex-grow: 1; padding: 12px; border: 1px solid var(--border-color); 
            border-radius: 8px 0 0 8px; background-color: var(--bg-interactive); 
            color: var(--text-primary); font-size: 1.0em; height: 45px;
            resize: none;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        #sendMessageBtn {
            padding: 12px 20px; background-color: var(--llama-color); 
            color: white; border: none; border-radius: 0 8px 8px 0; 
            cursor: pointer; font-size: 1.0em; height: 45px;
            transition: background-color 0.2s;
            display: flex; align-items: center; justify-content: center;
        }
        #sendMessageBtn:disabled { background-color: var(--text-secondary); cursor: not-allowed; }
        
        /* Rules/Tip Box */
        .rules-box {
            background-color: var(--bg-container);
            border-left: 5px solid var(--llama-color);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: var(--text-secondary);
            font-family: 'Inter', sans-serif;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        .rules-box strong { color: var(--llama-color); font-weight: 700; }
        .rules-box .tip { color: var(--typing-indicator); font-weight: 600; }

        /* Dock Menu (Ajout du bouton Nettoyer l'IA) */
        .dock-menu { 
            position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); 
            display: flex; gap: 10px; padding: 10px; z-index: 1000; 
            background-color: rgba(30, 30, 30, 0.85); /* Semi-transparent */
            border: 1px solid var(--border-color); border-radius: 35px; 
            backdrop-filter: blur(10px); 
        }
        .dock-menu-item { 
            display: flex; align-items: center; justify-content: center; 
            background-color: var(--bg-container); color: var(--text-primary); 
            border: 1px solid var(--border-color); border-radius: 50%; 
            width: 50px; height: 50px; font-size: 28px; cursor: pointer; 
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;
        }
        .dock-menu-item:hover {
            background-color: var(--bg-interactive);
        }
    </style>
</head>
<body class="light-mode">

    <div class="dock-menu" id="dockMenu">
        <a href="#" class="dock-menu-item" title="Accueil" onclick="location.reload()"><span class="material-symbols-outlined">home</span></a>
        <div class="dock-menu-item" id="resetModelBtn" title="Nettoyer/Vider l'IA (mémoire)"><span class="material-symbols-outlined">memory</span></div>
        <div class="dock-menu-item" id="darkModeToggle" title="Changer le thème"><span class="material-symbols-outlined" id="darkModeIcon">nightlight</span></div>
    </div>

    <div class="container">
        <h1>Strategica</h1>
        <p class="subtitle">Modèle Llama 3.2 (1B) - Chat Local Résilient via WASM/CPU</p>

        <div class="section" id="model-loader-section">
            <h2>1. Initialisation du Moteur</h2>
            <div id="model-loader">
                <p style="color: var(--text-secondary); margin-bottom: 20px; text-align: center;">Le modèle est forcé sur l'inférence **WASM/CPU** pour une compatibilité mobile maximale. Le modèle (~1 Go) est téléchargé et mis en cache dans votre navigateur.</p>
                <button id="load-model-btn">Charger le Modèle de Chat (Llama-3.2-1B)</button>
                <div id="model-status">Statut : Inactif</div>
                <div class="progress-bar-container" id="progress-container"><div class="progress-bar" id="progress-bar">0%</div></div>
                <div class="console-container" id="model-console-container" style="display:none;">
                    <h4>Journal d'Installation et de Debug 🛠️</h4>
                    <div class="console-output" id="model-console-output"></div>
                </div>
            </div>
        </div>

        <div class="section" id="chat-interface" style="display:none;">
            <h2>2. Chat Conversationnel (Diffusion Simulé)</h2>
            
            <div class="rules-box">
                <p><strong>Performance :</strong> Le modèle est léger et rapide. Pour éviter la surcharge mémoire/CPU, il est limité à **3 phrases maximum** par réponse.</p>
                <p class="tip">Utilisez le bouton "Mémoire" dans le Dock si les réponses deviennent lentes. 🧠</p>
            </div>

            <div id="messages-display">
                <div class="assistant-message-wrapper message-wrapper">
                    <div class="message-bubble assistant-message-bubble">
                        <strong>Système :</strong>
                        <div class="assistant-content">Bienvenue ! Je suis Llama 3.2, un assistant local conçu pour être rapide et fiable. Comment puis-je vous aider ?</div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <textarea id="userInput" placeholder="Écrivez votre message ici... (Ctrl/Shift + Entrée pour nouvelle ligne)" disabled rows="1" aria-label="Zone de saisie du message"></textarea>
                <button id="sendMessageBtn" disabled title="Envoyer le message">
                    <span class="material-symbols-outlined">send</span>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.0.10/marked.min.js"></script>
    
    <script type="module">
        import { pipeline } from 'https://cdn.jsdelivr.net/npm/@huggingface/transformers@latest'; 

        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js`;

        const MODEL_NAME = 'onnx-community/Llama-3.2-1B-Instruct-q4f16';
        const TASK = 'text-generation';

        const SYSTEM_PROMPT_CONTENT = "Tu es un assistant IA conversationnel léger et très rapide, basé sur Llama 3.2. Ton but est de fournir des réponses brèves, précises et engageantes. Ton ton est toujours informatif et légèrement formel. Limite tes réponses à 3 phrases maximum. Ne dévie jamais de la question posée. Si une requête est ambiguë, demande poliment une clarification. Rappelle-toi que la cohérence de tes réponses est critique.";

        // Mappage DOM
        const dom = {
            loadModelBtn: document.getElementById('load-model-btn'), modelStatus: document.getElementById('model-status'),
            progressContainer: document.getElementById('progress-container'), progressBar: document.getElementById('progress-bar'),
            modelConsoleContainer: document.getElementById('model-console-container'), modelConsoleOutput: document.getElementById('model-console-output'),
            modelLoaderSection: document.getElementById('model-loader-section'),
            
            chatInterface: document.getElementById('chat-interface'),
            userInput: document.getElementById('userInput'),
            sendMessageBtn: document.getElementById('sendMessageBtn'),
            messagesDisplay: document.getElementById('messages-display'),

            darkModeToggle: document.getElementById('darkModeToggle'),
            darkModeIcon: document.getElementById('darkModeIcon'),
            resetModelBtn: document.getElementById('resetModelBtn'),
        };

        let state = { pipe: null, messageHistory: [] }; 
        
        function logTo(consoleElement, message, type = 'info') {
            const logLine = document.createElement('p');
            const time = new Date().toLocaleTimeString();
            logLine.textContent = `[${time}] ${message}`;
            if (type === 'error') logLine.classList.add('log-error');
            else if (type === 'success') logLine.classList.add('log-success');
            else if (type === 'debug') logLine.classList.add('log-debug');
            consoleElement.appendChild(logLine);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }
        
        function switchToChatView() {
            dom.modelLoaderSection.style.display = 'none';
            dom.chatInterface.style.display = 'block';
        }

        /**
         * CORRECTION 2: Réinitialise l'état du modèle et de l'interface utilisateur.
         */
        function resetModelAndInterface(showLog = true) {
            if (showLog) {
                logTo(dom.modelConsoleOutput, '🗑️ Début de la réinitialisation de l\'IA et de la mémoire...', 'debug');
            }
            
            state.pipe = null;
            state.messageHistory = [];
            
            // Réinitialiser l'interface de chat
            const initialMessage = dom.messagesDisplay.querySelector('.assistant-message-wrapper');
            dom.messagesDisplay.innerHTML = '';
            dom.messagesDisplay.appendChild(initialMessage);

            // Retour à l'écran de chargement
            dom.chatInterface.style.display = 'none';
            dom.modelLoaderSection.style.display = 'block';
            
            dom.modelStatus.textContent = 'Statut : Nettoyé. Cliquez pour recharger.';
            dom.modelStatus.style.color = 'var(--llama-color)';
            dom.loadModelBtn.disabled = false;
            dom.userInput.disabled = true;
            dom.sendMessageBtn.disabled = true;
            
            if (showLog) {
                logTo(dom.modelConsoleOutput, '✅ Modèle et historique réinitialisés. Relancez l\'initialisation.', 'success');
            }
        }

        async function loadModel() {
            if (state.pipe) {
                switchToChatView();
                return;
            }

            dom.loadModelBtn.disabled = true;
            dom.progressContainer.style.display = 'block';
            dom.modelConsoleContainer.style.display = 'block';
            dom.modelConsoleOutput.innerHTML = '';
            
            logTo(dom.modelConsoleOutput, '🐌 Forçage de l\'inférence sur WASM/CPU pour une meilleure compatibilité mobile (WebGPU ignoré).', 'debug');

            try {
                logTo(dom.modelConsoleOutput, `▶️ Démarrage du téléchargement du modèle ${MODEL_NAME}...`);
                
                state.pipe = await pipeline(TASK, MODEL_NAME, {
                    device: 'wasm', 
                    progress_callback: (p) => {
                        if (typeof p.progress === 'number') {
                            const percentage = p.progress.toFixed(1);
                            dom.progressBar.style.width = percentage + '%';
                            dom.progressBar.textContent = `${percentage}%`;
                        }
                        
                        let statusText = `[${p.status}] ${p.file || ''}`;
                        dom.modelStatus.textContent = `Statut : ${statusText}`;

                        // CORRECTION 1: Logique de logging affinée pour éviter le spam
                        if (p.status === 'initiate' || p.status === 'done' || p.status === 'ready') {
                            const progressLog = typeof p.progress === 'number' ? `(${p.progress.toFixed(1)}%)` : '';
                            logTo(dom.modelConsoleOutput, `${statusText} ${progressLog}`);

                            if (p.status === 'ready') {
                                dom.modelStatus.textContent = 'Le modèle est prêt ! Initialisation...';
                            }
                        }
                    }
                });
                
                logTo(dom.modelConsoleOutput, '✅ Modèle initialisé avec succès.', 'success');
                
                const deviceString = state.pipe?.model?.device || 'wasm';
                const backend = deviceString.toLowerCase().includes('wasm') ? 'WASM/CPU ⚙️ (Forcé)' : 'Inconnu';

                logTo(dom.modelConsoleOutput, `Backend d'inférence réel utilisé : ${backend}`, 'debug');

                switchToChatView();
                
                dom.sendMessageBtn.disabled = false; 
                dom.userInput.disabled = false;
                dom.userInput.focus();

            } catch (error) {
                // CORRECTION 1: Gestion d'erreur robuste lors du chargement
                const errorDetail = error?.message || String(error) || 'Une erreur inconnue est survenue durant le chargement ONNX/WASM.';
                
                logTo(dom.modelConsoleOutput, '❌ ERREUR CRITIQUE LORS DU CHARGEMENT', 'error');
                logTo(dom.modelConsoleOutput, `Message : ${errorDetail}`, 'error');
                dom.modelStatus.textContent = `Erreur de chargement: ${errorDetail.substring(0, 50)}...`;
                dom.modelStatus.style.color = 'var(--danger-red)';
                dom.loadModelBtn.disabled = false;
            }
        }
        
        function addMessage(role, text) {
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `message-wrapper ${role}-message-wrapper`;
            
            const messageBubble = document.createElement('div');
            messageBubble.className = `message-bubble ${role}-message-bubble`;
            
            const roleLabel = role === 'user' ? 'Moi' : 
                              role === 'assistant' ? 'Llama 3.2' : 'Système';
            
            messageBubble.innerHTML = `<strong>${roleLabel} :</strong>`;
            
            const contentElement = document.createElement('div');
            contentElement.className = 'assistant-content';

            if (role === 'user' || role === 'system') {
                 contentElement.innerHTML = marked.parse(text); 
            }

            messageBubble.appendChild(contentElement);
            messageWrapper.appendChild(messageBubble);
            dom.messagesDisplay.appendChild(messageWrapper);
            dom.messagesDisplay.scrollTop = dom.messagesDisplay.scrollHeight;

            return contentElement; 
        }

        /**
         * CORRECTION 3: Frappe simulée plus rapide (delay = 4ms) pour l'UX mobile
         * CORRECTION 4: Rend le Markdown seulement à la fin (performance)
         */
        function simulateTyping(element, text, delay = 4) {
            return new Promise((resolve) => {
                let i = 0;
                element.innerHTML = `<span class="typing-indicator"><span class="typing-cursor"></span></span>`;
                const typingIndicator = element.querySelector('.typing-indicator');

                function type() {
                    if (i < text.length) {
                        typingIndicator.textContent = typingIndicator.textContent.slice(0, -1) + text.charAt(i);
                        i++;
                        dom.messagesDisplay.scrollTop = dom.messagesDisplay.scrollHeight;
                        setTimeout(type, delay);
                    } else {
                        // Rendu final en Markdown pour la qualité
                        element.innerHTML = marked.parse(text);
                        resolve();
                    }
                }
                type();
            });
        }
        
        function adjustTextareaHeight() {
            dom.userInput.style.height = 'auto'; 
            dom.userInput.style.height = dom.userInput.scrollHeight + 'px';
            if (dom.userInput.scrollHeight > 150) {
                 dom.userInput.style.height = '150px';
                 dom.userInput.style.overflowY = 'auto';
            } else {
                 dom.userInput.style.overflowY = 'hidden';
            }
        }

        async function sendMessage() {
            const userText = dom.userInput.value.trim();
            if (!userText || !state.pipe) {
                return;
            }
            
            logTo(dom.modelConsoleOutput, `[User Prompt] : "${userText.substring(0, 50)}..."`, 'debug');

            addMessage('user', userText);
            dom.userInput.value = '';
            adjustTextareaHeight();
            dom.sendMessageBtn.disabled = true;
            dom.userInput.disabled = true;
            
            state.messageHistory.push({ role: 'user', content: userText });

            const fullHistoryWithSystem = [
                { role: 'system', content: SYSTEM_PROMPT_CONTENT },
                ...state.messageHistory
            ];
            
            const streamContainer = addMessage('assistant', '');

            try {
                logTo(dom.modelConsoleOutput, `[History Length] : ${fullHistoryWithSystem.length} messages envoyés.`, 'debug');
                
                const response = await state.pipe(fullHistoryWithSystem, {
                    max_new_tokens: 2048, 
                    temperature: 0.7,
                    top_p: 0.9,
                    do_sample: true,
                });

                const generatedHistory = response[0].generated_text;
                let assistantResponse = "";
                
                if (Array.isArray(generatedHistory) && generatedHistory.length > 0) {
                    const lastMessage = generatedHistory.slice(-1)[0];
                    if (lastMessage && lastMessage.content) {
                        assistantResponse = lastMessage.content;
                    }
                } else {
                    assistantResponse = "Je n'ai pas pu générer de réponse. Le modèle est peut-être saturé ou le prompt était trop long.";
                }
                
                // Simulation de frappe avec vitesse optimisée (4ms)
                await simulateTyping(streamContainer, assistantResponse, 4); 
                
                state.messageHistory.push({ role: 'assistant', content: assistantResponse });
                
                const responseLength = assistantResponse.split(/[.!?]/).filter(s => s.trim().length > 0).length;
                logTo(dom.modelConsoleOutput, `[AI Response] : Coherence check: ${responseLength} phrases.`, responseLength > 3 ? 'error' : 'debug');
                
            } catch (error) {
                // CORRECTION FINALE : Gestion des erreurs robustes (résout 'undefined')
                const errorDetail = error?.message || String(error) || 'Une erreur inconnue est survenue (mémoire ou erreur ONNX).';
                
                const errorMessage = `❌ Désolé, erreur de génération : ${errorDetail}`;
                
                streamContainer.innerHTML = marked.parse(errorMessage);
                logTo(dom.modelConsoleOutput, `❌ ERREUR DE GÉNÉRATION: ${errorDetail}`, 'error');
                
            } finally {
                dom.sendMessageBtn.disabled = false;
                dom.userInput.disabled = false;
                dom.userInput.focus();
            }
        }
        
        // **********************************************
        // ÉCOUTEURS D'ÉVÉNEMENTS
        // **********************************************

        dom.loadModelBtn.addEventListener('click', loadModel);
        dom.sendMessageBtn.addEventListener('click', sendMessage);
        dom.resetModelBtn.addEventListener('click', () => resetModelAndInterface(true));

        dom.userInput.addEventListener('input', adjustTextareaHeight);

        dom.userInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey) {
                e.preventDefault(); 
                sendMessage();
            }
            if (e.key === 'Enter' && (e.shiftKey || e.ctrlKey)) {
                const start = dom.userInput.selectionStart;
                const end = dom.userInput.selectionEnd;
                const value = dom.userInput.value;
                dom.userInput.value = value.substring(0, start) + "\n" + value.substring(end);
                dom.userInput.selectionStart = dom.userInput.selectionEnd = start + 1;
                adjustTextareaHeight();
            }
        });
        
        // Initialisation du thème au chargement
        document.addEventListener('DOMContentLoaded', () => {
            // CORRECTION 5: Persistance du mode sombre/clair et UX
            const storedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
                document.body.classList.replace('light-mode', 'dark-mode');
                dom.darkModeIcon.textContent = 'clear_day';
                dom.darkModeToggle.setAttribute('aria-label', 'Activer le mode clair');
            } else {
                dom.darkModeIcon.textContent = 'nightlight';
                dom.darkModeToggle.setAttribute('aria-label', 'Activer le mode sombre');
            }

            adjustTextareaHeight(); 
        });
        
        // Gestion du mode sombre/clair
        dom.darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode'); 
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            dom.darkModeIcon.textContent = isDarkMode ? 'clear_day' : 'nightlight';
            dom.darkModeToggle.setAttribute('aria-label', isDarkMode ? 'Activer le mode clair' : 'Activer le mode sombre');
        });

    </script>
</body>
</html>
